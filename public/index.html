<!doctype html>
<html lang="en">
  <head>
    <title>Mark My Run</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- External resources. -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css" />

    <!-- Application resources. -->
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body class="container">

    <!-- Header. -->
    <h1 class="row-fluid">
      <img class="pull-left" src="img/logo.png" />
      Mark My Run
    </h1>

    <!-- Splash and content wrapper. -->
    <img id="splash" src="img/splash.png" />
    <div class="hide" id="content">

    <!-- Location. -->
    <form name="filters" ng-controller="LocationCtrl" novalidate>
      <div class="input-append row-fluid">
        <input name="location" required type="text" ng-change="updateLocationData(location)" ng-model="location" bs-typeahead="typeahead">
        <button class="btn" data-dropdown="filters" ng-click="slideToggle();">Filters <span class="caret"></span></button>
        <button class="btn btn-primary" type="submit" ng-click="submit(locationData, selectedDistances(), selectedTypes())" ng-disabled="filters.$invalid || !locationData">Go!</button>
      </div>

      <div class="filters hide row-fluid">
        <div class="well well-small clearfix">
          <div class="control-group span4">
            <label class="control-label" for="poi"><strong>Distance</strong></label>
            <div class="controls">
              <label class="checkbox" ng-repeat="distance in distances">
                <input name="distance" type="radio" value="{{ distance.id }}" ng-checked="distance.checked" ng-click="setDistance(distance)" ng-model="distance.checked" /> {{ distance.name }}
              </label>
            </div>
          </div>
          <div class="control-group span8">
            <label class="control-label" for="poi" ng-click="toggleSelect()"><strong>Points of Interest</strong></label>
            <div class="row-fluid">
              <div class="controls span6">
                <label class="checkbox" ng-repeat="type in types1">
                  <input name="types[]" type="checkbox" value="{{ type.id }}" ng-checked="type.checked" ng-model="type.checked" /> {{ type.id | humanType }}
                </label>
              </div>
              <div class="controls span6">
                <label class="checkbox" ng-repeat="type in types2">
                  <input name="types[]" type="checkbox" value="{{ type.id }}" ng-checked="type.checked" ng-model="type.checked" /> {{ type.id | humanType }}
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

    </form>

    <!-- Places. -->
    <div ng-controller="POICtrl">
      <p class="alert alert-info" ng-show="!run.distance && !places.length && !map">Gathering Points of Interest for your location…</p>
      <p class="alert alert-error" ng-show="0 === places.length">Nothing worth seeing, please try again…</p>
      <form name="poi" ng-show="places" novalidate>
        <div class="places row-fluid" ng-repeat="place in places">
          <label class="clearfix place well well-small">
            <div class="select span1">
              <input type="checkbox" ng-click="select(place)" ng-model="place.checked" />
            </div>
            <div class="span11">
              <h3>{{ place.name }}</h3>
              <div class="row-fluid">
                <div class="span4" ng-show="place.image"><img alt="{{ place.name }}" src="{{ place.image }}" /></div>
                <div class="span8">
                  <p ng-show="place.fullResults.types">
                    <span class="label" ng-repeat="type in place.types" style="margin-right: 2px">{{ type | humanType }}</span>
                  </p>
                  <p ng-show="place.rating"><span class="icon-star"></span> {{ place.rating | number:1 }}</p>
                  <p ng-show="!place.checked"><span class="icon-map-marker"></span> +{{ place.delta | number:1 }} mi</p>
                  <p ng-show="place.checked"><span class="icon-map-marker"></span> Deselect to shorten your run from {{ run.distance | number:1 }} to {{ run.distance + place.delta | number:1 }} miles.</p>
                  <button class="btn btn-inverse btn-mini" ng-click="adjustStart(place)">Start my run here</button>
                </div>
              </div>
            </div>
          </label>
        </div>
        <button class="btn btn-primary btn-large row-fluid" type="submit" ng-click="plot(run)" ng-disabled="!selected">I want to run {{ run.distance | number:1 }} miles!</button>
      </form>
    </div>

    <!-- Map. -->
    <div ng-controller="MapCtrl" ng-show="path">
      <p><strong>Distance: {{ distance | number:1 }} mi.</strong></p>
      <div id="map"></div>
    </div>

    <!-- End content wrapper. -->
    </div>

    <!-- External resources. -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.5/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/0.7.4/angular-strap.min.js"></script>
    <script src="//maps.googleapis.com/maps/api/js?sensor=false"></script>

    <script>var KINVEY_DEBUG = true;</script>
    <script src="vendor/kinvey-html5-1.0.4-snapshot.js"></script>

    <!-- Application resources. -->
    <script src="lib/app.js"></script>
  </body>
</html>